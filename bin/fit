#!/usr/bin/env ruby
$:.unshift File.join(File.dirname(__FILE__), '..', 'lib')

require 'fit/file_runner'
require 'fit/parse'
require 'fit/version'

require 'optparse'

options = OptionParser.new
options.on("-v", "--version") do
  puts Fit::VERSION_BLURB
  exit 0
end
options.on("-h", "--help") do
  puts Fit::HELP_BLURB
  exit 0
end
options.on("-eENC", "--encoding=ENC", String) do |e|
  raise NotImplementedError.new(e)
end

begin
  args = options.parse(ARGV)
rescue OptionParser::InvalidOption => invalid
  puts "#{File.basename($0)}: #{invalid.message}"
  exit -1
end

report = args[1]
unless report.nil?
  Fit::Parse.footnote_path = File.dirname(report) + File::SEPARATOR
end
Fit::FileRunner.new.run args
